<!DOCTYPE html>
<html>

<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.bundle.js"></script>
  <script src='https://code.jquery.com/jquery-3.1.1.min.js'></script>
  <script src="/socket.io/socket.io.js"></script>
  <style>
    .margin-adjust {
      margin-top: 6%;
    }
    .textcolor{
      color:#6A854A;
    }
  </style>
  <script src="chart.js"></script>
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <ul class="nav nav-pills">
        <li role="presentation"><a style="color:#736C6C" href="#DL303">DL-303</a></li>
        <li role="presentation"><a style="color:#736C6C" href="/PM3133">PM-3133</a></li>
      </ul>
    </div>
  </nav>
  <!-- chart.js  -->
  <div class="container margin-adjust">
   <div class="row">
     <h1 class="col-md-offset-1">DL-303</h1>
   </div>
    <div class="row">
      <div class="col-md-offset-1 col-md-10 col-sm-12">
        <canvas id="DL303Chart"></canvas>
         <hr>
      </div>
    </div>

  </div>
  <div class="container">
  <div class="row">
    <div class="col-md-offset-1 col-md-8 col-sm-12">
      <h1>DO control</h1>
    </div>
    <div class="row">
      <div class="col-md-1 col-md-offset-3">
        <p>DO1</p>
        <h3 id= "ET7044_DO1" class="textcolor" ></h3>
        <form action="/" method="post">
          <input type="hidden" name="DO" value="DO1">
          <button type="submit" class="btn btn-success">ON/OFF</button>
        </form>
      </div>
      <div class="col-md-1">
        <p>DO2</p>
        <h3 id= "ET7044_DO2" class="textcolor"></h3>
        <form action="/" method="post">
          <input type="hidden" name="DO" value="DO2">
          <button type="submit" class="btn btn-success">ON/OFF</button>
        </form>
      </div>
      <div class="col-md-1">
        <p>DO3</p>
        <h3 id= "ET7044_DO3" class="textcolor"></h3>
         <form action="/" method="post">
          <input type="hidden" name="DO" value="DO3">
          <button type="submit" class="btn btn-success">ON/OFF</button>
        </form>
      </div>
      <div class="col-md-1">
        <p>DO4</p>
        <h3 id= "ET7044_DO4" class="textcolor"></h3>
        <form action="/" method="post">
          <input type="hidden" name="DO" value="DO4">
          <button type="submit" class="btn btn-success">ON/OFF</button>
        </form>
      </div>
      <div class="col-md-1">
        <p>DO5</p>
        <h3 id= "ET7044_DO5" class="textcolor"></h3>
         <form action="/" method="post">
          <input type="hidden" name="DO" value="DO5">
          <button type="submit" class="btn btn-success">ON/OFF</button>
        </form>
      </div>
       <div class="col-md-1">
        <p>DO6</p>
        <h3 id= "ET7044_DO6" class="textcolor"></h3>
         <form action="/" method="post">
          <input type="hidden" name="DO" value="DO6">
          <button type="submit" class="btn btn-success">ON/OFF</button>
        </form>
      </div>
      <div class="col-md-1">
        <p>DO7</p>
        <h3 id= "ET7044_DO7" class="textcolor"></h3>
         <form action="/" method="post">
          <input type="hidden" name="DO" value="DO7">
          <button type="submit" class="btn btn-success">ON/OFF</button>
        </form>
      </div>
      <div class="col-md-1">
        <p>DO8</p>
        <h3 id= "ET7044_DO8" class="textcolor"></h3>
         <form action="/" method="post">
          <input type="hidden" name="DO" value="DO8">
          <button type="submit" class="btn btn-success">ON/OFF</button>
        </form>
      </div>
      </div>
    </div>
  </div>
  <script>
    //socket.io connect to server
    var socket = io.connect('http://127.0.0.1:3000'); 
    socket.on('ET7044_DO1', function (msg) {
      $('#ET7044_DO1').text(msg.data)
    });
    socket.on('ET7044_DO2', function (msg) {
      $('#ET7044_DO2').text(msg.data)
    });
    socket.on('ET7044_DO3', function (msg) {
      $('#ET7044_DO3').text(msg.data)
    });
    socket.on('ET7044_DO4', function (msg) {
      $('#ET7044_DO4').text(msg.data)
    });
    socket.on('ET7044_DO5', function (msg) {
      $('#ET7044_DO5').text(msg.data)
    });
    socket.on('ET7044_DO6', function (msg) {
      $('#ET7044_DO6').text(msg.data)
    });
    socket.on('ET7044_DO7', function (msg) {
      $('#ET7044_DO7').text(msg.data)
    });
     socket.on('ET7044_DO8', function (msg) {
      $('#ET7044_DO8').text(msg.data)
    });
    //get chart.js  var
    var CO2 = [{{CO2}}]; 
    var Temperature = [{{Temperature}}];
    var Humidity = [{{Humidity}}];
    var dl303num = [{{dl303num}}];
    //chart 01
    var ctx = document.getElementById('DL303Chart').getContext('2d');
    var myChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: dl303num,
        datasets: [{
            label: 'CO2 (ppm)',
            data: CO2,
            fill: false,
            backgroundColor: "rgba(206, 100, 100, 1)",
            pointBackgroundColor: '#fff',
            borderColor: "rgba(206, 100, 100, 1)",
          }, {
            label: 'Temperature (*C)',
            data: Temperature,
            fill: false,
            backgroundColor: "#648BD0",
            pointBackgroundColor: '#fff',
            borderColor: "#648BD0",
          },
          {
            label: 'Humidity (%)',
            data: Humidity,
            fill: false,
            pointBackgroundColor: '#fff',
            backgroundColor: "rgba(100,100,126,0.1)"
          }
        ]
      }
    });
  
  </script>
</head>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Factory</title>